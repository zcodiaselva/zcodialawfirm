<div role="tabpanel" id="tabs" ng-cloak><ul class="nav nav-pills" role="tablist"><li role="presentation" class="active"><a href="#chatlist" aria-controls="chatlist" role="tab" data-toggle="tab" title="Chat list"><i class="material-icons mr-0">info_outline</i></a></li></ul><div class="tab-content" ng-cloak><div role="tabpanel" class="tab-pane form-group active" id="chatlist"><form action="<?php  echo $input->form_action?>" method="get" name="SearchFormRight"><input type="hidden" name="doSearch" value="1"><div class="row"><div class="col-md-2"><div class="form-group"><label>Nick</label><input type="text" class="form-control" name="nick" value="<?php  echo htmlspecialchars($input->nick)?>" /></div></div><div class="col-md-2"><div class="form-group"><label>E-mail</label><input type="text" class="form-control" name="email" value="<?php  echo htmlspecialchars($input->email)?>" /></div></div><div class="col-md-2"><div class="form-group"><label>Department</label><?php  echo erLhcoreClassRenderHelper::renderCombobox( array ( 'input_name' => 'department_id', 'optional_field' => 'Select department', 'selected_id' => $input->department_id, 'css_class' => 'form-control', 'list_function' => 'erLhcoreClassModelDepartament::getList' )); ?></div></div><div class="col-md-2"><div class="form-group"><label>Department group</label><?php  echo erLhcoreClassRenderHelper::renderCombobox( array ( 'input_name' => 'department_group_id', 'optional_field' => 'Choose department group', 'selected_id' => $input->department_group_id, 'css_class' => 'form-control', 'list_function' => 'erLhcoreClassModelDepartamentGroup::getList' )); ?></div></div><div class="col-md-2"><div class="form-group"><label>User</label><?php  echo erLhcoreClassRenderHelper::renderCombobox( array ( 'input_name' => 'user_id', 'optional_field' => 'Select user', 'selected_id' => $input->user_id, 'css_class' => 'form-control', 'display_name' => 'name_official', 'list_function' => 'erLhcoreClassModelUser::getUserList' )); ?></div></div><div class="col-md-2"><div class="form-group"><label>User group</label><?php  echo erLhcoreClassRenderHelper::renderCombobox( array ( 'input_name' => 'group_id', 'optional_field' => 'Select group', 'selected_id' => $input->group_id, 'css_class' => 'form-control', 'display_name' => 'name', 'list_function' => 'erLhcoreClassModelGroup::getList' )); ?></div></div><div class="col-md-2"><div class="form-group"><label>Date range from</label><div class="row"><div class="col-md-12"><input type="text" class="form-control" name="timefrom" id="id_timefrom" placeholder="E.g <?php  echo date('Y-m-d',time()-7*24*3600)?>" value="<?php  echo htmlspecialchars($input->timefrom)?>" /></div></div></div></div><div class="col-md-3"><div class="form-group"><label>Hour and minute from</label><div class="row"><div class="col-md-6"><select name="timefrom_hours" class="form-control"><option value="">Select hour</option><?php  for ($i = 0; $i <= 23; $i++) : ?><option value="<?php  echo $i?>" <?php  if (isset($input->timefrom_hours) && $input->timefrom_hours === $i) : ?>selected="selected"<?php  endif;?>><?php  echo str_pad($i,2, '0', STR_PAD_LEFT);?> h.</option><?php  endfor;?></select></div><div class="col-md-6"><select name="timefrom_minutes" class="form-control"><option value="">Select minute</option><?php  for ($i = 0; $i <= 59; $i++) : ?><option value="<?php  echo $i?>" <?php  if (isset($input->timefrom_minutes) && $input->timefrom_minutes === $i) : ?>selected="selected"<?php  endif;?>><?php  echo str_pad($i,2, '0', STR_PAD_LEFT);?> m.</option><?php  endfor;?></select></div></div></div></div><div class="col-md-2"><div class="form-group"><label>Date range to</label><div class="row"><div class="col-md-12"><input type="text" class="form-control" name="timeto" id="id_timeto" placeholder="E.g <?php  echo date('Y-m-d')?>" value="<?php  echo htmlspecialchars($input->timeto)?>" /></div></div></div></div><div class="col-md-3"><div class="form-group"><label>Hour and minute to</label><div class="row"><div class="col-md-6"><select name="timeto_hours" class="form-control"><option value="">Select hour</option><?php  for ($i = 0; $i <= 23; $i++) : ?><option value="<?php  echo $i?>" <?php  if (isset($input->timeto_hours) && $input->timeto_hours === $i) : ?>selected="selected"<?php  endif;?>><?php  echo str_pad($i,2, '0', STR_PAD_LEFT);?> h.</option><?php  endfor;?></select></div><div class="col-md-6"><select name="timeto_minutes" class="form-control"><option value="">Select minute</option><?php  for ($i = 0; $i <= 59; $i++) : ?><option value="<?php  echo $i?>" <?php  if (isset($input->timeto_minutes) && $input->timeto_minutes === $i) : ?>selected="selected"<?php  endif;?>><?php  echo str_pad($i,2, '0', STR_PAD_LEFT);?> m.</option><?php  endfor;?></select></div></div></div></div><div class="col-md-2"><div class="form-group"><label>Wait time</label><div class="row"><div class="col-xs-6"><select class="form-control" name="wait_time_from"><option>More than</option><option value="0" <?php  $input->wait_time_from === 0 ? print 'selected="selected"' : ''?>>0 seconds</option><option value="5" <?php  $input->wait_time_from === 5 ? print 'selected="selected"' : ''?>>5 seconds</option><option value="10" <?php  $input->wait_time_from === 10 ? print 'selected="selected"' : ''?>>10 seconds</option><option value="20" <?php  $input->wait_time_from === 20 ? print 'selected="selected"' : ''?>>20 seconds</option><option value="30" <?php  $input->wait_time_from === 30 ? print 'selected="selected"' : ''?>>30 seconds</option><option value="40" <?php  $input->wait_time_from === 40 ? print 'selected="selected"' : ''?>>40 seconds</option><option value="50" <?php  $input->wait_time_from === 50 ? print 'selected="selected"' : ''?>>50 seconds</option><option value="60" <?php  $input->wait_time_from === 60 ? print 'selected="selected"' : ''?>>60 seconds</option><option value="90" <?php  $input->wait_time_from === 90 ? print 'selected="selected"' : ''?>>90 seconds</option><?php  for ($i = 2; $i < 5; $i++) : ?><option value="<?php  echo $i*60?>" <?php  $input->wait_time_from === $i*60 ? print 'selected="selected"' : ''?>><?php  echo $i?> m.</option><?php  endfor ?><?php  for ($i = 2; $i < 13; $i++) : ?><option value="<?php  echo $i*5*60?>" <?php  $i*60*5 === $input->wait_time_from ? print 'selected="selected"' : ''?>><?php  echo $i*5?> m.</option><?php  endfor ?></select></div><div class="col-xs-6"><select class="form-control" name="wait_time_till"><option>Less than</option><option value="0" <?php  $input->wait_time_till === 0 ? print 'selected="selected"' : ''?>>0 seconds</option><option value="5" <?php  $input->wait_time_till === 5 ? print 'selected="selected"' : ''?>>5 seconds</option><option value="10" <?php  $input->wait_time_till === 10 ? print 'selected="selected"' : ''?>>10 seconds</option><option value="20" <?php  $input->wait_time_till === 20 ? print 'selected="selected"' : ''?>>20 seconds</option><option value="30" <?php  $input->wait_time_till === 30 ? print 'selected="selected"' : ''?>>30 seconds</option><option value="40" <?php  $input->wait_time_till === 40 ? print 'selected="selected"' : ''?>>40 seconds</option><option value="50" <?php  $input->wait_time_till === 50 ? print 'selected="selected"' : ''?>>50 seconds</option><option value="60" <?php  $input->wait_time_till === 60 ? print 'selected="selected"' : ''?>>60 seconds</option><option value="90" <?php  $input->wait_time_till === 90 ? print 'selected="selected"' : ''?>>90 seconds</option><?php  for ($i = 2; $i < 5; $i++) : ?><option value="<?php  echo $i*60?>" <?php  $input->wait_time_till === $i*60 ? print 'selected="selected"' : ''?>><?php  echo $i?> m.</option><?php  endfor ?><?php  for ($i = 2; $i < 13; $i++) : ?><option value="<?php  echo $i*60*5?>" <?php  $i*60*5 === $input->wait_time_till ? print 'selected="selected"' : ''?> ><?php  echo $i*5?> m.</option><?php  endfor ?></select></div></div></div></div></div><div class="row"><div class="col-md-2"><div class="form-group"><label>Vote status</label><select name="fbst" class="form-control"><option value="">Any</option><option value="0" <?php  if ($input->fbst === 0) : ?>selected="selected"<?php  endif;?>>Not Voted</option><option value="1" <?php  if ($input->fbst === 1) : ?>selected="selected"<?php  endif;?>>Up Voted</option><option value="2" <?php  if ($input->fbst === 2) : ?>selected="selected"<?php  endif;?>>Down vote</option></select></div></div><div class="col-md-2"><div class="form-group"><label>Chat status</label><select name="chat_status" class="form-control"><option value="">Any</option><option value="0" <?php  if ($input->chat_status === erLhcoreClassModelChat::STATUS_PENDING_CHAT) : ?>selected="selected"<?php  endif;?>>Pending chats</option><option value="1" <?php  if ($input->chat_status === erLhcoreClassModelChat::STATUS_ACTIVE_CHAT) : ?>selected="selected"<?php  endif;?>>Active chats</option><option value="2" <?php  if ($input->chat_status === erLhcoreClassModelChat::STATUS_CLOSED_CHAT) : ?>selected="selected"<?php  endif;?>>Closed chats</option><option value="3" <?php  if ($input->chat_status === erLhcoreClassModelChat::STATUS_CHATBOX_CHAT) : ?>selected="selected"<?php  endif;?>>Chatbox chats</option><option value="4" <?php  if ($input->chat_status === erLhcoreClassModelChat::STATUS_OPERATORS_CHAT) : ?>selected="selected"<?php  endif;?>>Operators chats</option><?php ?></select></div></div><div class="col-md-3"><label>Product</label><?php  echo erLhcoreClassRenderHelper::renderCombobox( array ( 'input_name' => 'product_id', 'optional_field' => 'Select product', 'selected_id' => $input->product_id, 'css_class' => 'form-control', 'list_function' => 'erLhAbstractModelProduct::getList' )); ?></div><div class="col-md-2"><div class="form-group"><label>Chat ID</label><input type="text" class="form-control" name="chat_id" value="<?php  echo htmlspecialchars($input->chat_id)?>" /></div></div><div class="col-md-3"><div class="form-group"><label>Chat duration</label><div class="row"><div class="col-xs-6"><select class="form-control" name="chat_duration_from" title="Chat duration from"><option value="">From</option><option value="1" <?php  1 === $input->chat_duration_from ? print 'selected="selected"' : ''?> >1 s.</option><?php  for ($i = 1; $i < 10; $i++) : ?><option value="<?php  echo $i*60?>" <?php  $i*60 === $input->chat_duration_from ? print 'selected="selected"' : ''?> ><?php  echo $i?> m.</option><?php  endfor; ?><?php  for ($i = 2; $i < 19; $i++) : ?><option value="<?php  echo $i*60*5?>" <?php  $i*60*5 === $input->chat_duration_from ? print 'selected="selected"' : ''?> ><?php  echo $i*5?> m.</option><?php  endfor; ?></select></div><div class="col-xs-6"><select class="form-control" name="chat_duration_till" title="Chat duration till"><option value="">Till</option><?php  for ($i = 1; $i < 10; $i++) : ?><option value="<?php  echo $i*60?>" <?php  $i*60 === $input->chat_duration_till ? print 'selected="selected"' : ''?> ><?php  echo $i?> m.</option><?php  endfor; ?><?php  for ($i = 2; $i < 19; $i++) : ?><option value="<?php  echo $i*60*5?>" <?php  $i*60*5 === $input->chat_duration_till ? print 'selected="selected"' : ''?> ><?php  echo $i*5?> m.</option><?php  endfor; ?></select></div></div></div></div></div><div class="row"><div class="col-md-3"><div class="form-group"><label class="control-label"><input type="checkbox" name="hum" <?php  $input->hum == 1 ? print ' checked="checked" ' : ''?> value="on" />Has unread messages</label></div></div><div class="col-md-3"><div class="form-group"><label class="control-label"><input type="checkbox" name="una" <?php  $input->una == 1 ? print ' checked="checked" ' : ''?> value="on" />Unanswered chat</label></div></div><div class="col-md-3"><div class="form-group"><label class="control-label"><input type="checkbox" name="anonymized" <?php  $input->anonymized == 1 ? print ' checked="checked" ' : ''?> value="on" />Anonymized</label></div></div></div><div class="btn-group" role="group" aria-label="..."><input type="submit" name="doSearch" class="btn btn-default" value="Search" /><?php  if ($pages->items_total > 0) : ?><a target="_blank" class="btn btn-default" href="<?php  echo $pages->serverURL?>/(print)/1">Print</a><a target="_blank" class="btn btn-default" href="<?php  echo $pages->serverURL?>/(xls)/1">XLS</a><a target="_blank" class="btn btn-default" href="<?php  echo $pages->serverURL?>/(xls)/2">XLS (with content)</a><?php  endif; ?></div></form><script>$(function() {$('#id_timefrom,#id_timeto').fdatepicker({format: 'yyyy-mm-dd'});});</script><?php  if ($pages->items_total > 0) { ?><form action="<?php  echo $input->form_action,$inputAppend?>" method="post"><input type="hidden" name="csfr_token" value="<?php  echo erLhcoreClassUser::instance()->getCSFRToken()?>" /><?php  $appendTableClass = '';?><table cellpadding="0" cellspacing="0" class="table<?php  echo $appendTableClass?>" width="100%"><thead><tr><th width="1%"><input class="mb0" type="checkbox" ng-model="check_all_items" /></th><th>Information</th><th>Operator</th><th>Department</th><th width="1%">Status</th><th width="1%"></th></tr></thead><?php  foreach ($items as $chat) : ?><tr><td><?php  if ($chat->can_edit_chat == true) : ?><input ng-checked="check_all_items" class="mb0" type="checkbox" name="ChatID[]" value="<?php  echo $chat->id?>" /><?php  endif;?></td><td><span title="<?php  echo $chat->id;?>" class="material-icons fs12 mr-0<?php  echo $chat->user_status_front == 2 ? ' icon-user-away' : ($chat->user_status_front == 0 ? ' icon-user-online' : ' icon-user-offline')?>" class="">&#xE3A6;</span>&nbsp;<?php  if ( !empty($chat->country_code) ) : ?><img src="/zcodialawfirm/ztchat/design/defaulttheme/images/flags/<?php  echo $chat->country_code?>.png" alt="<?php  echo htmlspecialchars($chat->country_name)?>" title="<?php  echo htmlspecialchars($chat->country_name)?>" />&nbsp;<?php  endif; ?><a class="material-icons" onclick="lhc.previewChat(<?php  echo $chat->id?>)">info_outline</a><a class="action-image material-icons" data-title="<?php  echo htmlspecialchars($chat->nick,ENT_QUOTES);?>" onclick="lhinst.startChatNewWindow('<?php  echo $chat->id;?>',$(this).attr('data-title'))" title="Open in a new window">open_in_new</a><?php  if ($chat->can_edit_chat && ($chat->status == erLhcoreClassModelChat::STATUS_PENDING_CHAT && ($can_delete_global == true || ($can_delete_general == true && $chat->user_id == $current_user_id)))) : ?><a class="csfr-required material-icons" onclick="return confirm(confLH.transLation.delete_confirm)" title="Reject chat" href="/zcodialawfirm/ztchat/index.php/site_admin/chat/delete/<?php  echo $chat->id?>">delete</a><?php  elseif ($chat->status == erLhcoreClassModelChat::STATUS_ACTIVE_CHAT) : ?><?php  if ($chat->can_edit_chat && ($can_close_global == true || $chat->user_id == $current_user_id)) : ?><a class="csfr-required material-icons" title="Close chat" href="/zcodialawfirm/ztchat/index.php/site_admin/chat/closechat/<?php  echo $chat->id?>">close</a><?php  endif;?><?php  if ($chat->can_edit_chat && ($can_delete_global == true || ($can_delete_general == true && $chat->user_id == $current_user_id))) : ?><a class="csfr-required material-icons" onclick="return confirm(confLH.transLation.delete_confirm)" title="Delete chat" href="/zcodialawfirm/ztchat/index.php/site_admin/chat/delete/<?php  echo $chat->id?>">delete</a><?php  endif;?><?php  elseif ($chat->status == erLhcoreClassModelChat::STATUS_CLOSED_CHAT || $chat->status == erLhcoreClassModelChat::STATUS_OPERATORS_CHAT || $chat->status == erLhcoreClassModelChat::STATUS_CHATBOX_CHAT) : ?><?php  if ($chat->can_edit_chat && ($can_delete_global == true || ($can_delete_general == true && $chat->user_id == $current_user_id))) : ?><a class="csfr-required material-icons" title="Delete chat" href="/zcodialawfirm/ztchat/index.php/site_admin/chat/delete/<?php  echo $chat->id?>">delete</a><?php  endif;?><?php  endif;?><?php  if ($chat->status_sub == erLhcoreClassModelChat::STATUS_SUB_OFFLINE_REQUEST) : ?><i title="Offline request" class="material-icons">mail</i><?php  endif?><a ng-click="lhc.startChat('<?php  echo $chat->id?>','<?php  echo htmlspecialchars($chat->nick,ENT_QUOTES)?>')"><?php  echo htmlspecialchars($chat->nick);?>, <small><i><?php  echo date(erLhcoreClassModule::$dateDateHourFormat,$chat->time);?></i></small>, <?php  echo htmlspecialchars($chat->department),($chat->product !== false ? ' | '.htmlspecialchars((string)$chat->product) : '');?></a><?php  if ($chat->has_unread_messages == 1) : ?><?php $diff = time()-$chat->last_user_msg_time; $hours = floor($diff/3600); $minits = floor(($diff - ($hours * 3600))/60); $seconds = ($diff - ($hours * 3600) - ($minits * 60)); ?> | <b><?php  echo $hours?> h. <?php  echo $minits ?> m. <?php  echo $seconds?> s. ago.</b><?php  endif;?></td><td><?php  echo htmlspecialchars($chat->user);?></td><td><?php  echo htmlspecialchars($chat->department);?></td><td nowrap="nowrap"><?php  if ($chat->status == erLhcoreClassModelChat::STATUS_PENDING_CHAT) : ?><i class="material-icons chat-pending">chat</i>Pending chat<?php  elseif ($chat->status == erLhcoreClassModelChat::STATUS_ACTIVE_CHAT) : ?><i class="material-icons chat-active">chat</i>Active chat<?php  elseif ($chat->status == erLhcoreClassModelChat::STATUS_CLOSED_CHAT) : ?><i class="material-icons chat-closed">chat</i>Closed chat<?php  elseif ($chat->status == erLhcoreClassModelChat::STATUS_CHATBOX_CHAT) : ?><i class="material-icons chat-active">chat</i>Chatbox chat<?php  elseif ($chat->status == erLhcoreClassModelChat::STATUS_OPERATORS_CHAT) : ?><i class="material-icons chat-active">face</i>Operators chat<?php  endif;?><?php ?></td><td><?php  if ($chat->fbst == 1) : ?><i class="material-icons up-voted">thumb_up</i><?php  elseif ($chat->fbst == 2) : ?><i class="material-icons down-voted">thumb_down<i><?php  endif;?></td></tr><?php  endforeach; ?></table><script>lhinst.protectCSFR();</script><?php  if (isset($pages)) : ?><?php  if (isset($pages) && $pages->num_pages > 1) : ?><nav><ul class="pagination paginator-lhc"><?php  if ($pages->current_page != 1) : ?><li class="arrow"><a class="previous" href="<?php  echo $pages->serverURL,$pages->prev_page,$pages->querystring?>">&laquo;</a></li><?php  endif;?><?php  if ($pages->num_pages > 10) : $needNoBolder = false; if ($pages->range[0] > 1) : $i = 1; $pageURL = $i > 1 ? '/(page)/'.$i : ''; $needNoBolder = true; if ($i == $pages->current_page) : ?><li class="current no-b"><a title="Go to page <?php  echo $i?> of <?php  echo $pages->num_pages?>" href="#"><?php  echo $i?></a></li><?php  else : ?><li><a class="no-b" title="Go to page <?php  echo $i?> of <?php  echo $pages->num_pages?>" href="<?php  echo $pages->serverURL,$pageURL,$pages->querystring?>"><?php  echo $i?></a></li><?php  endif; ?><li><a href="#">...</a></li><?php endif; for($i=$pages->range[0];$i<=$pages->lastArrayNumber;$i++) : if ($i > 0) : $pageURL = $i > 1 ? '/(page)/'.$i : ''; $noBolderClass = ($i == 1 || $needNoBolder == true) ? ' no-b' : ''; $needNoBolder = false; if ($i == $pages->current_page): ?><li class="active<?php  echo $noBolderClass?>"><a title="Go to page <?php  echo $i?> of <?php  echo $pages->num_pages?>"  href="#"><?php  echo $i?></a></li><?php  else : ?><li><a class="<?php  echo $noBolderClass?>" title="Go to page <?php  echo $i?> of <?php  echo $pages->num_pages?>" href="<?php  echo $pages->serverURL,$pageURL,$pages->querystring?>"><?php  echo $i?></a></li><?php  endif;endif;endfor; if ($pages->lastArrayNumber < $pages->num_pages) : $i = $pages->num_pages; $pageURL = $i > 1 ? '/(page)/'.$i : ''; ?><li><a href="#">...</a></li><?php  if ($i == $pages->current_page) : ?><li class="active"><a title="Go to page <?php  echo $i?> of <?php  echo $pages->num_pages?>" href="#"><?php  echo $i?></a></li><?php   else : ?><li><a class="no-b" title="Go to page <?php  echo $i?> of <?php  echo $pages->num_pages?>" href="<?php  echo $pages->serverURL,$pageURL,$pages->querystring?>"><?php  echo $i?></a></li><?php  endif; endif; else : for ($i=1;$i<=$pages->num_pages;$i++) : $noBolderClass = ($i == 1) ? ' no-b' : ''; $pageURL = $i > 1 ? '/(page)/'.$i : ''; if ($i == $pages->current_page) :?><li class="active<?php  echo $noBolderClass?>"><a href="#"><?php  echo $i?></a></li><?php  else : ?><li><a class="paginate" href="<?php  echo $pages->serverURL,$pageURL,$pages->querystring;?>"><?php  echo $i?></a></li><?php  endif; endfor; endif; if ($pages->current_page != $pages->num_pages): ?><li class="arrow"><a class="next" href="<?php  echo $pages->serverURL,'/(page)/',$pages->next_page,$pages->querystring?>">&raquo;</a></li><?php  endif;?></ul><div class="found-total pull-right">Page <?php  echo $pages->current_page?> of <?php  echo $pages->num_pages?>, Found - <?php  echo $pages->items_total?></div></nav><?php  endif;?><?php  endif;?><div class="btn-group" role="group" aria-label="..."><input type="submit" name="doClose" class="btn btn-warning" value="Close selected" /><input type="submit" name="doDelete" class="btn btn-danger" value="Delete selected" /></div></form><?php  } else { ?><p>Empty...</p><?php  } ?></div></div></div><script>$( document ).ready(function() {lhinst.attachTabNavigator();$('#right-column-page').removeAttr('id');$('#tabs a:first').tab('show')});</script>