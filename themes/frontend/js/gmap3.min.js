!function(n,t,e){"use strict";function o(n){return E(!0,{},n||{})}function r(){var n=Array.prototype.slice,t=n.call(arguments,1);return n.apply(arguments[0],t)}function i(n){return void 0===n}function u(n){return k().then(function(){return n})}function a(n){return T[n]||(T[n]=c(n)),T[n]}function c(n){function t(n){return e.apply(this,n)}var e=x[n];return t.prototype=e.prototype,new t(r(arguments,1))}function s(n,t){f(n.split(" "),t)}function f(n,t){(j(n)?n:[n]).forEach(t)}function p(n){return Object.keys(n)}function l(n){return p(n).map(function(t){return n[t]})}function g(n,t){return(n=o(n)).bounds&&(n.bounds=v(n.bounds)),u(t(n))}function d(n,t,e){var r=O();return n=o(n),k().then(function(){var e,o,r=n.address;return r?(delete n.address,(e=r,o=O(),"string"==typeof e&&(e={address:e}),a("Geocoder").geocode(e,function(n,t){t===x.GeocoderStatus.OK?o.resolve(n[0].geometry.location):o.reject(t)}),o).then(function(e){n[t]=e})):void(n[t]=h(n[t]))}).then(function(){r.resolve(e(n))}).fail(function(n){r.reject(n)}),r}function h(n,t){return j(n)?new x.LatLng(n[0],n[1]):!t||!n||n instanceof x.LatLng?n:new x.LatLng(n.lat,n.lng)}function v(n,t){return j(n)?new x.LatLngBounds({lat:n[2],lng:n[3]},{lat:n[0],lng:n[1]}):t&&!n.getCenter?new x.LatLngBounds({lat:n.south,lng:n.west},{lat:n.north,lng:n.east}):n}function y(t,o){function r(){function n(n){return e.getProjection().fromLatLngToDivPixel(n)}var e=this,r=[];i.call(e),e.setMap(t),e.onAdd=function(){e.getPanes().overlayMouseTarget.appendChild(u[0])},o.position?(e.getPosition=function(){return o.position},e.setPosition=function(n){o.position=n,e.draw()},e.draw=function(){var t=n(o.position);u.css({left:t.x+o.x+"px",top:t.y+o.y+"px"})}):(e.getBounds=function(){return o.bounds},e.setBounds=function(n){o.bounds=n,e.draw()},e.draw=function(){var t=n(o.bounds.getSouthWest()),e=n(o.bounds.getNorthEast());u.css({left:t.x+o.x+"px",top:e.y+o.y+"px",width:e.x-t.x+o.x+"px",height:t.y-e.y+o.y+"px"})}),e.onRemove=function(){r.map(function(n){x.event.removeListener(n)}),u.remove(),e.$=u=null},e.$=u}var i=x.OverlayView,u=n(e.createElement("div")).css({border:"none",borderWidth:0,position:"absolute"}).append(o.content);return(o=E({x:0,y:0},o)).position?o.position=h(o.position,!0):o.bounds&&(o.bounds=v(o.bounds,!0)),r.prototype=new i,new r}function m(n,t,e,o){this.cluster=n,this.markers=t,this.$=e.$,this.overlay=e,e.getBounds=function(){return c("LatLngBounds",o.getSouthWest(),o.getNorthEast())}}function L(n,t){function e(){var t,e,o,r,i,u,a,s,f,p;return c("Circle",{center:n.getCenter(),radius:1.15*(t=n.getCenter(),e=n.getBounds().getNorthEast(),o=Math,r=o.PI,i=r*t.lat()/180,u=r*t.lng()/180,a=r*e.lat()/180,s=r*e.lng()/180,f=o.cos,p=o.sin,6371e3*o.acos(o.min(f(i)*f(a)*f(u)*f(s)+f(i)*p(u)*f(a)*p(s)+p(i)*p(a),1)))}).getBounds()}function i(){var i,u,a,s,l,h,x=n.getZoom(),C={},T=[],k={};h=""+x,x>3&&(u=e(),f(w,function(n,t){u.contains(n.getPosition())||(h+="-"+t,k[t]=!0,n.getMap()&&n.setMap(null))})),v&&f(w,function(n,t){k[t]||v(n)||(h+="-"+t,k[t]=!0,n.getMap()&&n.setMap(null))}),h!==g&&(g=h,f(w,function(e,p){var g,h;k[p]||(i=[p],g=e.getPosition(),h=d.fromLatLngToDivPixel(g),u=c("LatLngBounds",d.fromDivPixelToLatLng(c("Point",h.x-P,h.y+P)),d.fromDivPixelToLatLng(c("Point",h.x+P,h.y-P))),b&&f(r(w,p+1),function(n,t){!k[t+=p+1]&&u.contains(n.getPosition())&&(i.push(t),k[t]=!0)}),s=i.join("-"),C[s]=!0,M[s]||(l=i.map(function(n){return w[n]}),(a=t.cb(r(l)))?(u=c("LatLngBounds"),f(l,function(n){u.extend(n.getPosition()),n.getMap()&&n.setMap(null)}),(a=o(a)).position=u.getCenter(),M[s]=new m(L,r(l),y(n,a),u),T.push(M[s])):f(l,function(t){t.getMap()||t.setMap(n)})))}),f(p(M),function(n){C[n]||(M[n].overlay.setMap(null),delete M[n])}),T.length&&f(B,function(n){n(T)}))}function u(){clearTimeout(a),a=setTimeout(i,100)}var a,s,g,d,v,L=this,w=[],P=(t.size||200)>>1,b=!0,M={},B=[];(t=t||{}).markers=t.markers||[],L._b=function(n){n(l(M)),B.push(n)},L.markers=function(){return r(w)},L.groups=function(){return l(M)},L.enable=function(){b||(b=!0,g="",u())},L.disable=function(){b&&(b=!1,g="",u())},L.add=function(n){w.push(n),g="",u()},L.remove=function(n){w=w.filter(function(t){return t!==n}),g="",u()},L.filter=function(n){v!==n&&(v=n,g="",u())},t.markers.map(function(n){n.position=h(n.position),w.push(c("Marker",n))}),s=setInterval(function(){(d=function(n){function t(){return this.onAdd=this.onRemove=this.draw=function(){},x.OverlayView.call(this)}t.prototype=new x.OverlayView;var e=new t;return e.setMap(n),e.getProjection()}(n))&&(clearInterval(s),x.event.addListener(n,"zoom_changed",u),x.event.addListener(n,"bounds_changed",u),i())},10)}function w(t,e){function p(){return{$:t,get:B.get}}function l(t,e,o,i){var u=arguments.length>3;u||(i=o),n.each(t,function(n,t){f(e,function(e){var a=e instanceof m,c=a||e instanceof x.OverlayView,s=c?e.$.get(0):e;x.event["add"+(c?"Dom":"")+"Listener"+(i?"Once":"")](s,n,function(n){f(t,function(t){if(D(t))if(a)t.call(p(),void 0,e,e.cluster,n);else if(u){var i=r(o);i.unshift(e),i.push(n),t.apply(p(),i)}else t.call(p(),e,n)})})})})}function v(t){return function(e){if(j(e)){var o=[],r=e.map(function(n){return t.call(B,n).then(function(n){o.push(n)})});return(i=r,k.apply(n,i)).then(function(){return b.push(o),o})}var i;return t.apply(B,arguments).then(function(n){return b.push(n),n})}}function w(n){return function(){var t=r(arguments);return M=M.then(function(e){return D(t[0])?k(t[0].call(p(),e)).then(function(e){return t[0]=e,n.apply(B,t)}):k(n.apply(B,t))})}}var P,b=[],M=k(),B=this;B.map=w(function(n){return P||d(n,"center",function(n){return P=c("Map",t.get(0),n),b.push(P),P})}),s("Marker:position Circle:center InfoWindow:position:0 Polyline:path Polygon:paths",function(n){var t=(n=n.split(":"))[1]||"";B[n[0].toLowerCase()]=w(v(function(e){return(t.match(/^path/)?function(n,t,e){return(n=o(n))[t]=(n[t]||[]).map(h),u(e(n))}:d)(e,t,function(t){return"0"!==n[2]&&(t.map=P),c(n[0],t)})}))}),s("TrafficLayer TransitLayer BicyclingLayer",function(n){B[n.toLowerCase()]=w(function(){var t=c(n);return b.push(t),t.setMap(P),t})}),B.kmllayer=w(v(function(n){return(n=o(n)).map=P,k(c("KmlLayer",n))})),B.rectangle=w(v(function(n){return g(n,function(n){return n.map=P,c("Rectangle",n)})})),B.overlay=w(v(function(n){function t(n){return y(P,n)}return(n=o(n)).bounds?g(n,t):d(n,"position",t)})),B.groundoverlay=w(function(n,t,e){return g({bounds:t},function(t){(e=o(e)).map=P;var r=c("GroundOverlay",n,t.bounds,e);return b.push(r),r})}),B.styledmaptype=w(function(n,t,e){var o=c("StyledMapType",t,e);return b.push(o),P.mapTypes.set(n,o),o}),B.streetviewpanorama=w(function(t,e){return d(e,"position",function(e){var o=c("StreetViewPanorama",n(t).get(0),e);return P.setStreetView(o),b.push(o),o})}),B.route=w(function(n){var t=O();return(n=o(n)).origin=h(n.origin),n.destination=h(n.destination),a("DirectionsService").route(n,function(n,e){b.push(n),t.resolve(e===x.DirectionsStatus.OK&&n)}),t}),B.cluster=w(function(n){var t=new L(P,o(n));return b.push(t),u(t)}),B.directionsrenderer=w(function(t){var e;return t&&((t=o(t)).map=P,t.panel&&(t.panel=n(t.panel).get(0)),e=c("DirectionsRenderer",t)),b.push(e),e}),B.latlng=w(v(function(n){return d(n,"latlng",function(n){return b.push(n.latlng),n.latlng})})),B.fit=w(function(){var n=c("LatLngBounds");return f(b,function(t){t!==P&&f(t,function(t){t&&(t.getPosition&&t.getPosition()?n.extend(t.getPosition()):t.getBounds&&t.getBounds()?(n.extend(t.getBounds().getNorthEast()),n.extend(t.getBounds().getSouthWest())):t.getPaths&&t.getPaths()?f(t.getPaths().getArray(),function(t){f(t.getArray(),function(t){n.extend(t)})}):t.getPath&&t.getPath()?f(t.getPath().getArray(),function(t){n.extend(t)}):t.getCenter&&t.getCenter()&&n.extend(t.getCenter()))})}),n.isEmpty()||P.fitBounds(n),!0}),B.wait=function(n){M=M.then(function(t){var e=O();return setTimeout(function(){e.resolve(t)},n),e})},B.then=function(n){D(n)&&(M=M.then(function(t){return k(n.call(p(),t)).then(function(n){return i(n)?t:n})}))},B.catch=function(n){D(n)&&(M=M.then(null,function(t){return k(n.call(p(),t))}))},s("on once",function(n,t){B[n]=function(){var n=arguments[0];n&&("string"==typeof n&&((n={})[arguments[0]]=r(arguments,1)),M.then(function(e){if(e){if(e instanceof L)return e._b(function(e){e&&e.length&&l(n,e,t)}),l(n,e.markers(),[void 0,e],t);l(n,e,t)}}))}}),B.get=function(n){return i(n)?b.map(function(n){return j(n)?n.slice():n}):(0>n&&(n=b.length+n),j(b[n])?b[n].slice():b[n])},e&&B.map(e)}var x,P,b,M,B,C,T={},k=n.when,E=n.extend,j=n.isArray,D=n.isFunction,O=n.Deferred;k((B=O(),C="__gmap3",n.holdReady(!0),M=function(){var o;t.google&&t.google.maps||!1===P?B.resolve():(t[C]=function(){delete t[C],B.resolve()},(b=e.createElement("script")).type="text/javascript",b.src="https://maps.googleapis.com/maps/api/js?callback="+C+(P?"&"+("string"==typeof P?P:p(o=P).map(function(n){return encodeURIComponent(n)+"="+encodeURIComponent(o[n])}).join("&")):""),n("head").append(b))},"loading"!=e.readyState?M():e.addEventListener("DOMContentLoaded",M),B)).then(function(){n.holdReady(!1)}),n.gmap3=function(n){P=n},n.fn.gmap3=function(e){var o=[];return x=t.google.maps,this.each(function(){var t=n(this),r=t.data("gmap3");r||(r=new w(t,e),t.data("gmap3",r)),o.push(r)}),new function(n,t){var e=this;p(t[0]).forEach(function(n){e[n]=function(){var o=[],i=r(arguments);return t.forEach(function(t){o.push(t[n].apply(t,i))}),"get"===n?o.length>1?o:o[0]:e}}),e.$=n}(this,o)}}(jQuery,window,document);